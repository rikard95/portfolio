<app-klocka></app-klocka>

<div class="max-w-[800px] w-[90%] my-16 mx-auto p-10 bg-gradient-to-br from-[rgba(30,10,62,0.95)] to-[rgba(26,0,50,0.9)] border-2 border-[rgba(255,204,0,0.8)] rounded-[20px] shadow-[0_8px_32px_rgba(0,0,0,0.3),0_0_60px_rgba(255,204,0,0.1)] text-white leading-[1.7] box-border overflow-x-hidden transition-all duration-500 backdrop-blur-[10px] hover:border-[#00ff88] hover:shadow-[0_12px_48px_rgba(0,0,0,0.4),0_0_80px_rgba(0,255,136,0.15)] hover:-translate-y-0.5 [body.light-mode_&]:bg-gradient-to-br [body.light-mode_&]:from-[rgba(255,255,255,0.98)] [body.light-mode_&]:to-[rgba(248,249,250,0.95)] [body.light-mode_&]:text-[var(--light-text-primary)] [body.light-mode_&]:border-[var(--light-border)] [body.light-mode_&]:shadow-[0_8px_32px_rgba(0,0,0,0.08),0_0_60px_rgba(255,149,0,0.05)] [body.light-mode_&]:hover:border-[var(--light-accent)] [body.light-mode_&]:hover:shadow-[0_12px_48px_rgba(0,0,0,0.12),0_0_80px_rgba(255,149,0,0.1)] max-[768px]:p-6 max-[768px]:w-[90%] max-[480px]:p-4 max-[480px]:my-8 max-[480px]:w-[95%]">
  <h1 class="text-center mb-4 font-bold text-shadow-[0_2px_10px_rgba(255,204,0,0.3)] [body.light-mode_&]:text-[var(--light-text-primary)] [body.light-mode_&]:text-shadow-[0_2px_10px_rgba(255,149,0,0.1)] max-[480px]:text-[1.8rem] max-[480px]:mb-4">Dagbok</h1>

  <!-- Form controls in 3x2 grid layout -->
  <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6">
    <!-- Textarea - full width on all screens -->
    <textarea
      [(ngModel)]="newEntryText"
      placeholder="Skriv ny anteckning..."
      (keydown.enter)="addEntry(); $event.preventDefault()"
      class="sm:col-span-3 min-h-[120px] bg-[rgba(20,10,40,0.8)] text-white border border-[rgba(255,204,0,0.3)] rounded-xl p-3 text-base resize-y outline-none transition-all duration-200 shadow-[inset_0_2px_8px_rgba(0,0,0,0.2)] focus:border-[#ffcc00] focus:shadow-[0_0_16px_rgba(255,204,0,0.5),inset_0_2px_8px_rgba(0,0,0,0.2)] [body.light-mode_&]:bg-[rgba(248,249,250,0.9)] [body.light-mode_&]:text-[var(--light-text-primary)] [body.light-mode_&]:border-[var(--light-border)] [body.light-mode_&]:focus:border-[var(--light-accent)] [body.light-mode_&]:focus:shadow-[0_0_16px_rgba(255,149,0,0.3),inset_0_2px_8px_rgba(0,0,0,0.05)]">
    </textarea>

    <!-- Row 1: 3 buttons -->
    <button (click)="addEntry()" class="py-3 px-4 rounded-xl border-none bg-gradient-to-br from-[#007bff] to-[#0056b3] text-white cursor-pointer transition-all duration-200 min-h-[48px] text-base touch-manipulation box-border font-semibold shadow-[0_2px_8px_rgba(0,123,255,0.3)] hover:bg-gradient-to-br hover:from-[#00ff88] hover:to-[#00c86b] hover:-translate-y-0.5 hover:shadow-[0_4px_16px_rgba(0,255,136,0.4)] [body.light-mode_&]:bg-gradient-to-br [body.light-mode_&]:from-[#007bff] [body.light-mode_&]:to-[#0056b3] [body.light-mode_&]:text-white [body.light-mode_&]:hover:bg-gradient-to-br [body.light-mode_&]:hover:from-[var(--light-accent)] [body.light-mode_&]:hover:to-[var(--light-accent-hover)]">Spara</button>
    
    <button (click)="setToday()" class="py-3 px-4 rounded-xl border-none bg-gradient-to-br from-[#007bff] to-[#0056b3] text-white cursor-pointer transition-all duration-200 min-h-[48px] text-base touch-manipulation box-border font-semibold shadow-[0_2px_8px_rgba(0,123,255,0.3)] hover:bg-gradient-to-br hover:from-[#00ff88] hover:to-[#00c86b] hover:-translate-y-0.5 hover:shadow-[0_4px_16px_rgba(0,255,136,0.4)] [body.light-mode_&]:bg-gradient-to-br [body.light-mode_&]:from-[#007bff] [body.light-mode_&]:to-[#0056b3] [body.light-mode_&]:text-white [body.light-mode_&]:hover:bg-gradient-to-br [body.light-mode_&]:hover:from-[var(--light-accent)] [body.light-mode_&]:hover:to-[var(--light-accent-hover)]">Idag</button>
    
    <button (click)="showAll()" class="py-3 px-4 rounded-xl border-none bg-gradient-to-br from-[#007bff] to-[#0056b3] text-white cursor-pointer transition-all duration-200 min-h-[48px] text-base touch-manipulation box-border font-semibold shadow-[0_2px_8px_rgba(0,123,255,0.3)] hover:bg-gradient-to-br hover:from-[#00ff88] hover:to-[#00c86b] hover:-translate-y-0.5 hover:shadow-[0_4px_16px_rgba(0,255,136,0.4)] [body.light-mode_&]:bg-gradient-to-br [body.light-mode_&]:from-[#007bff] [body.light-mode_&]:to-[#0056b3] [body.light-mode_&]:text-white [body.light-mode_&]:hover:bg-gradient-to-br [body.light-mode_&]:hover:from-[var(--light-accent)] [body.light-mode_&]:hover:to-[var(--light-accent-hover)]">Se alla</button>

    <!-- Row 2: Date input spanning all 3 columns -->
    <input
      type="date"
      [(ngModel)]="filterDate"
      class="sm:col-span-3 p-3 rounded-xl border border-[rgba(255,204,0,0.3)] bg-[rgba(20,10,40,0.8)] text-white transition-all duration-200 shadow-[inset_0_2px_8px_rgba(0,0,0,0.2)] focus:border-[#ffcc00] focus:shadow-[0_0_16px_rgba(255,204,0,0.5),inset_0_2px_8px_rgba(0,0,0,0.2)] [body.light-mode_&]:bg-[rgba(248,249,250,0.9)] [body.light-mode_&]:text-[var(--light-text-primary)] [body.light-mode_&]:border-[var(--light-border)] [body.light-mode_&]:focus:border-[var(--light-accent)] [body.light-mode_&]:focus:shadow-[0_0_16px_rgba(255,149,0,0.3),inset_0_2px_8px_rgba(0,0,0,0.05)] min-h-[48px] text-base"
    >
  </div>

  <div class="flex flex-col gap-4">
    <div *ngFor="let entry of filteredEntries" class="flex items-start gap-4 bg-gradient-to-br from-[rgba(42,13,62,0.9)] to-[rgba(26,0,50,0.8)] border-2 border-[rgba(0,255,136,0.3)] rounded-2xl p-3 flex-wrap transition-all duration-500 backdrop-blur-[5px] shadow-[0_4px_12px_rgba(0,0,0,0.3)] hover:border-[#00ff88] hover:-translate-y-0.5 hover:shadow-[0_6px_20px_rgba(0,255,136,0.3)] [body.light-mode_&]:bg-gradient-to-br [body.light-mode_&]:from-[rgba(248,249,250,0.95)] [body.light-mode_&]:to-[rgba(255,255,255,0.9)] [body.light-mode_&]:border-[var(--light-border)] [body.light-mode_&]:shadow-[0_4px_12px_rgba(0,0,0,0.08)] [body.light-mode_&]:hover:border-[var(--light-accent)] [body.light-mode_&]:hover:shadow-[0_6px_20px_rgba(255,149,0,0.2)] max-[768px]:flex-col max-[768px]:items-stretch max-[768px]:p-4 max-[480px]:p-4 max-[480px]:gap-3">
      <div class="flex-[0_0_160px] min-w-[100px] max-[768px]:flex-[1_1_100%] max-[768px]:min-w-0 max-[480px]:flex-[1_1_100%]">
        <div class="text-[0.85rem] text-[#ffcc00] mb-[0.3rem] font-semibold text-shadow-[0_0_8px_rgba(255,204,0,0.3)] [body.light-mode_&]:text-[var(--light-text-primary)] [body.light-mode_&]:text-shadow-none max-[480px]:text-[0.9rem]">{{ entry.timestamp }}</div>
      </div>

      <div class="flex-[1_1_100px] min-w-[120px] max-[768px]:flex-[1_1_100%] max-[768px]:min-w-0 max-[480px]:flex-[1_1_100%]">
        <div *ngIf="!entry.editing" class="whitespace-pre-wrap">{{ entry.text }}</div>
        <textarea
          *ngIf="entry.editing"
          [(ngModel)]="entry.editText"
          rows="3"
          class="w-full bg-[rgba(20,10,40,0.6)] border border-[rgba(255,204,0,0.3)] rounded-lg text-white p-[0.3rem] mb-[15px] resize-none box-border transition-all duration-200 shadow-[inset_0_2px_6px_rgba(0,0,0,0.2)] focus:outline-none focus:border-[#ffcc00] focus:shadow-[0_0_12px_rgba(255,204,0,0.4),inset_0_2px_6px_rgba(0,0,0,0.2)] [body.light-mode_&]:bg-[rgba(255,255,255,0.9)] [body.light-mode_&]:text-[var(--light-text-primary)] [body.light-mode_&]:border-[var(--light-border)] [body.light-mode_&]:focus:border-[var(--light-accent)] [body.light-mode_&]:focus:shadow-[0_0_12px_rgba(255,149,0,0.3),inset_0_2px_6px_rgba(0,0,0,0.05)] max-[480px]:p-[0.7rem] max-[480px]:text-base">
        </textarea>
      </div>

      <div class="flex flex-col gap-[0.3rem] flex-[0_0_120px] min-w-[80px] items-end max-[768px]:flex-[1_1_100%] max-[768px]:min-w-0 max-[768px]:items-start max-[768px]:mt-2 max-[480px]:flex-[1_1_100%]">
        <div *ngIf="!entry.editing" class="flex gap-2 w-full max-[768px]:gap-2 max-[480px]:flex-col max-[480px]:gap-3">
          <button (click)="startEdit(entry)" class="py-[0.7rem] px-[1.2rem] rounded-xl border-none bg-gradient-to-br from-[#007bff] to-[#0056b3] text-white cursor-pointer transition-all duration-200 flex-[0_0_auto] min-h-[44px] text-base touch-manipulation box-border font-semibold shadow-[0_2px_8px_rgba(0,123,255,0.3)] hover:bg-gradient-to-br hover:from-[#00ff88] hover:to-[#00c86b] hover:-translate-y-0.5 hover:shadow-[0_4px_16px_rgba(0,255,136,0.4)] [body.light-mode_&]:bg-gradient-to-br [body.light-mode_&]:from-[#007bff] [body.light-mode_&]:to-[#0056b3] [body.light-mode_&]:text-white [body.light-mode_&]:border-none [body.light-mode_&]:hover:bg-gradient-to-br [body.light-mode_&]:hover:from-[var(--light-accent)] [body.light-mode_&]:hover:to-[var(--light-accent-hover)] max-[768px]:flex-1 max-[768px]:py-[0.7rem] max-[768px]:text-base max-[768px]:min-h-[48px] max-[480px]:w-full max-[480px]:py-[0.8rem] max-[480px]:text-base max-[480px]:min-h-[50px]">Ã„ndra</button>
          <button (click)="removeEntry(entry)" class="mt-2.5 py-[0.7rem] px-[1.2rem] rounded-xl border-none cursor-pointer transition-all duration-200 flex-[0_0_auto] min-h-[44px] text-base touch-manipulation box-border font-semibold bg-gradient-to-br from-[#dc3545] to-[#b02a37] shadow-[0_2px_8px_rgba(220,53,69,0.3)] hover:bg-gradient-to-br hover:from-[#b02a37] hover:to-[#8b1f2b] hover:shadow-[0_4px_16px_rgba(220,53,69,0.5)] text-white [body.light-mode_&]:bg-gradient-to-br [body.light-mode_&]:from-[#dc3545] [body.light-mode_&]:to-[#b02a37] max-[768px]:flex-1 max-[768px]:py-[0.7rem] max-[768px]:text-base max-[768px]:min-h-[48px] max-[768px]:mt-0 max-[480px]:w-full max-[480px]:py-[0.8rem] max-[480px]:text-base max-[480px]:min-h-[50px]">Ta bort</button>
        </div>
        <div *ngIf="entry.editing" class="flex gap-2 w-full max-[768px]:gap-2 max-[480px]:flex-col max-[480px]:gap-3">
          <button (click)="saveEdit(entry)" class="py-[0.7rem] px-[1.2rem] rounded-xl border-none bg-gradient-to-br from-[#007bff] to-[#0056b3] text-white cursor-pointer transition-all duration-200 flex-[0_0_auto] min-h-[44px] text-base touch-manipulation box-border font-semibold shadow-[0_2px_8px_rgba(0,123,255,0.3)] hover:bg-gradient-to-br hover:from-[#00ff88] hover:to-[#00c86b] hover:-translate-y-0.5 hover:shadow-[0_4px_16px_rgba(0,255,136,0.4)] [body.light-mode_&]:bg-gradient-to-br [body.light-mode_&]:from-[#007bff] [body.light-mode_&]:to-[#0056b3] [body.light-mode_&]:text-white [body.light-mode_&]:border-none [body.light-mode_&]:hover:bg-gradient-to-br [body.light-mode_&]:hover:from-[var(--light-accent)] [body.light-mode_&]:hover:to-[var(--light-accent-hover)] max-[768px]:flex-1 max-[768px]:py-[0.7rem] max-[768px]:text-base max-[768px]:min-h-[48px] max-[480px]:w-full max-[480px]:py-[0.8rem] max-[480px]:text-base max-[480px]:min-h-[50px]">Spara</button>
          <button (click)="cancelEdit(entry)" class="mt-2.5 py-[0.7rem] px-[1.2rem] rounded-xl border-none cursor-pointer transition-all duration-200 flex-[0_0_auto] min-h-[44px] text-base touch-manipulation box-border font-semibold bg-gradient-to-br from-[#dc3545] to-[#b02a37] shadow-[0_2px_8px_rgba(220,53,69,0.3)] hover:bg-gradient-to-br hover:from-[#b02a37] hover:to-[#8b1f2b] hover:shadow-[0_4px_16px_rgba(220,53,69,0.5)] text-white [body.light-mode_&]:bg-gradient-to-br [body.light-mode_&]:from-[#dc3545] [body.light-mode_&]:to-[#b02a37] max-[768px]:flex-1 max-[768px]:py-[0.7rem] max-[768px]:text-base max-[768px]:min-h-[48px] max-[768px]:mt-0 max-[480px]:w-full max-[480px]:py-[0.8rem] max-[480px]:text-base max-[480px]:min-h-[50px]">Avbryt</button>
        </div>
      </div>
    </div>
  </div>
</div>

<app-projekt></app-projekt>
